---
title: GraphQL
path: /graphql
index: 4
---

import Image from '../components/Image'

GraphQL es una arquitectura de dise√±o de APIs y tiene una sintaxis particular
para describir c√≥mo consultar data que tiene 3 caracter√≠sticas principales:

- Permite al cliente especificar exactamente qu√© data necesita (con sintaxis
  _parecida_ a un objeto JSON)
- Facilita traer data de fuentes m√∫ltiples
- Usa un sistema de tipos para describir la data

Hasta ahora todo muy de manual, pero sigamos as√≠ se entiende un poco m√°s todo üòä

### REST vs GraphQL

Veamos las diferencias que tienen GraphQL vs una API REST:

| API REST                                                              | GraphQL                                                       |
| --------------------------------------------------------------------- | ------------------------------------------------------------- |
| M√∫ltiples endpoints                                                   | Un solo endpoint                                              |
| Puede producirse over/under fetching (pedir data de menos/m√°s)        | Se pide s√≥lo la data necesaria                                |
| Puede retrasar tiempos de desarrollo si el endpoint no est√° preparado | Es m√°s din√°mico en preparaci√≥n de datos desde el back         |
| Es expl√≠cito el tipo de petici√≥n que se realiza                       | No es tan claro el tipo de petici√≥n                           |
| M√°s claro para manejo de request params / variables                   | Quiz√°s un poco menos claro para manejo de variables           |
| Debe mantenerse la documentaci√≥n al d√≠a                               | Es autodocumentado                                            |
| Distintas versiones pueden romper compatibilidad                      | Es incremental, disminuye la incompatibilidad entre versiones |

_Tengan en claro que algunas cosas de esta tabla son opiniones personales, si
alguien cree que las cosas no son como las digo y me puede explicar, soy todo
o√≠dos_ ü§ó

Veamos una comparaci√≥n de c√≥mo deber√≠a traerse la data desde una API REST contra
una GraphQL si estuvi√©semos haciendo, por ejemplo, una red social:

#### REST

## <Image imgName="rest.png" alt="Peticiones a una API REST" />

#### GraphQL

## <Image imgName="graphql.png" alt="Peticiones a una API GraphQL" />

Como vemos, seg√∫n como est√° armada esta API REST, para mostrar la data de lo que
ser√≠a el `Home` de algo similar a la red social del pajarito, tendr√≠amos que
hacer 3 peticiones para traer los datos que, utilizando GraphQL, podr√≠amos traer
en una sola petici√≥n. Ah√≠ se nota la diferencia en cantidad de endpoints.

Todo esto que digo no es que quiera decir que GraphQL es _mejor_ o que _viene a
reemplazar a REST_, sino que naci√≥ con la idea de mejorar algunas falencias de
REST, pero REST es mejor en otras cosas y situaciones. (cosa que no vamos a
cubrir ac√° porque sino se hace largu√≠simo jajajaja üòÖ)

En nuestro caso, nosotros vamos a ver c√≥mo se piden datos para utilizarlos en el
frontend, podemos encontrar un ejemplo de una **query** (consulta) en el archivo
`src/components/layout.js`:

```js
const data = useStaticQuery(graphql`
  query SiteTitleQuery {
    site {
      siteMetadata {
        title
      }
    }
  }
`)
```

**Qu√© #$%#$ es esto, Agustin?** üòí S√≠, yo s√© que al principio dije que era
_parecida_ a JSON la sintaxis y esto tiene cosas que nada que ver. Por suerte,
como Gatsby es re copado ya viene con una herramienta fant√°stica para ver toda
la data que tenemos disponible para consultar mediante GraphQL. Si notaron en la
consola luego de correr el comando **gatsby develop**, dice que si van a
http://localhost:8000/___graphql se van a encontrar con **GraphiQL** donde vamos
a ver listado del lado izquierdo en la secci√≥n _Explorer_ toda la data que
tenemos disponible para traernos al frontend con GraphQL.

<Image imgName="graphiql.png" alt="Interfaz de graphiql" />

En la imagen vemos que a la izquierda nos va a aparecer toooooodo lo que tenemos
disponible, no va a ser exactamente igual que en la imagen pero podemos ver
cosas como `allFile` para consultar todos los archivos que exponemos con el
plugin **gatsby-source-filesystem** que nos vino preinstalado, tambi√©n `file`
para consultar por cierto archivo usando filtros, `allImageSharp` para todas las
fotos, `imageSharp` para una sola foto, y as√≠... Se entiende la diferencia? üòâ

Entonces si vemos nuestra query y el resultado de realizarla en el lado derecho
de **GraphiQL**, vemos que nos traemos el t√≠tulo de nuestra p√°gina, pero d√≥nde
definimos nosotros eso? ü§î Esto viene predefinido con Gatsby, y son valores que
est√°n en el archivo `gatsby-config.js`, donde veremos este objeto:

```javascript
siteMetadata: {
    title: `Gatsby Default Starter`,
    description: `Kick off your next, great Gatsby project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.`,
    author: `@gatsbyjs`,
  },
```

El cual va a tener toda la metadata de nuestro proyecto, as√≠ que esos tres
valores (title, description y author) van a ser consultables tranquilamente en
cualquier lugar de nuestro frontend si los requerimos! (prueben en GraphiQL si
no me creen üòõ) Creo que mas que seguir explicando cosas, van a aprender m√°s si
empiezan a jugar un poco con GraphiQL.

Nuestros proyectos de github todav√≠a no los tenemos disponibles para consultar y
usar en el frontend, para eso necesitamos generar la query en la configuraci√≥n
del plugin y ya estar√≠a (recuerden que nuestros archivos `gatsby-algo.js`
funcionan como nuestro backend), vamos al siguiente paso para verlo üòÅ
